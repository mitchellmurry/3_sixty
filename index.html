<!DOCTYPE html>
<html lang="en">
  <head>
    <title>3_Sixty Animation</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
      body {
        background-color: #00ff0000;
        margin: 0px;
        overflow: hidden;
      }

      a {
        color:#0078ff;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>

    <script src="js/three.min.js"></script>
    <script src="js/libs/dat.gui.min.js"></script>
    <script src="js/libs/stats.min.js"></script>

    <script src="js/controls/OrbitControls.js"></script>
    <script src="js/renderers/Projector.js"></script>
    <script src="js/renderers/CanvasRenderer.js"></script>

    <script>
     var renderer, scene, camera, controls, particle;

var particles = []
var speeds = []
var meshs = []
var PARTICLE_COUNT = 20;

init();
animate();

function init() {

  // renderer
  renderer = new THREE.CanvasRenderer();
  renderer.setPixelRatio( window.devicePixelRatio );
  renderer.setSize( window.innerWidth, window.innerHeight );
  document.body.appendChild( renderer.domElement );

  // scene
  scene = new THREE.Scene();

  // camera
  camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
  camera.position.set(0, 0, 50);

  // controls
  controls = new THREE.OrbitControls( camera );
  controls.minDistance = 10;
  controls.maxDistance = 100;

  // axes
  scene.add( new THREE.AxisHelper( 1 ));

  // material  
  var material = new THREE.SpriteCanvasMaterial( {
		color: 0xffffff,
		program: function ( context ) {
  		context.beginPath();
  		context.arc(0, 0, 0.5, 0, Math.PI * 2, true);
  		context.fill();
  	}
	});

  // empty each time we init (in case we change anything in the sliders)
  particles = []
  speeds = []

    for (var i = 0; i < PARTICLE_COUNT; i++) {
      var particle = new THREE.Object3D();   
      
      var mesh =  new THREE.Sprite( material );
      // some point between 8 and 12
      mesh.position.x = 10 + Math.random() * 10;
      
      particle.rotation.x = 2 * Math.PI * Math.random();
      particle.rotation.y = 2 * Math.PI * Math.random();
      particle.rotation.z = 0;
      
      var speed = new THREE.Vector3(
        Math.random() * 0.02 + 0.005, 
        Math.random() * 0.02 + 0.005, 
        0
      )
      
      speeds.push(speed)

      particle.add( mesh )
      scene.add( particle ) 
      
      particles.push( particle )
      meshs.push( mesh )
    }   

  }   


    function animate() {
      requestAnimationFrame( animate );

      for (var i = 0; i < particles.length; i++) {
        // get the group from the particles array
        var particle = particles[i]
        
        // get the speed of rotation from the speeds array
        var speed = speeds[i]
        
        particle.rotation.x += speed.x;
        particle.rotation.y += speed.y;
        particle.rotation.z += speed.z;

      }

      renderer.render( scene, camera );

    }


    </script>
  </body>
</html>